<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eastern Garbage Patch</title>
    <style>
        body {
            background-color: #83D4F5;
            text-align: center;
            position: relative;
            min-height: 100vh;
            overflow: hidden;
        }

        /* Title and time */
        h1 {
            margin-top: 50px;
            font-size: 32px;
            color: #333;
        }

        .time {
            font-size: 24px;
            margin-top: 10px;
            color: #333;
        }

        /* Progress bar container */
        .container {
            position: absolute;
            top: 120px;
            width: 100%;
            background-color: #ddd;
            height: 20px;
            display: flex;
            align-items: center;
        }

        /* This will hold the colored fill */
        .mission1 {
            width: 0%;
            background-color: #2196F3;
            height: 100%;
            position: relative;
        }

        /* Text for percentage */
        .progress-text {
            position: absolute;
            color: white;
            font-weight: bold;
            font-size: 16px;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
        }

        /* Container for trash items */
        .trash-container {
            position: relative;
            width: 100%;
            height: 70vh;
            overflow: hidden;
            margin-top: 30px;
        }

        /* Style for trash items */
        .trash-item {
            position: absolute;
            width: 60px;
            cursor: pointer;
            transition: opacity 0.3s ease;
            border: 2px solid white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        /* Settings icon */
        .settings-icon {
            position: fixed;
            top: 10px;
            right: 10px;
            width: 40px;
            height: 40px;
            cursor: pointer;
        }

        /* Boat image */
        .boat {
            position: absolute;
            top: 20px;
            left: 10px;
            width: 150px;
            height: auto;
            z-index: 10;
        }
    </style>
</head>
<body>

    <!-- Settings icon in the top-right corner -->
    <a href="../settings.html">
        <img src="../images/instructions/Settings_icon.png" alt="Settings Icon" class="settings-icon">
    </a>

    <h1>Eastern Garbage Patch</h1>

    <div class="time" id="timeDisplay">Day 1: Mon, 12:30pm</div>

    <!-- Progress bar -->
    <div class="container">
        <div class="mission1" id="progressBar">
            <div class="progress-text" id="progressText">0%</div>
        </div>
    </div>

    <!-- Container for dynamically added trash items -->
    <div class="trash-container" id="trashContainer"></div>

    <!-- Boat image -->
    <img src="../images/bgs/boat.png" alt="Boat" class="boat">

    <script>
        let progress = 0; // Initialize progress
        let time = 12; // Starting time for "12:30 pm"
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const timeDisplay = document.getElementById('timeDisplay');
        const trashImages = [
            '../images/collecting/Glass.png',
            '../images/collecting/SodaCan.png',
            '../images/collecting/PlasticBottle.png'
        ];

        // Function to update the time every 45 seconds
        function updateTime() {
            setInterval(() => {
                time += 1; // Increment time by 1 hour (for simplicity)
                let hours = Math.floor(time);
                let minutes = (time % 1) * 60;
                minutes = Math.round(minutes / 30) * 30; // Round to 30-minute intervals
                timeDisplay.textContent = `Day 1: Mon, ${hours}:${minutes < 10 ? '0' : ''}${minutes}pm`;
            }, 45000); // Update every 45 seconds
        }

        // Function to create and display a trash image
        function showTrashImage(imagePath) {
            const trashContainer = document.getElementById('trashContainer');
            const img = document.createElement('img');
            img.src = imagePath;
            img.classList.add('trash-item');

            // Randomize position within the container
            img.style.top = `${Math.random() * 60}vh`;
            img.style.left = `${Math.random() * 90}vw`;

            // Add click event listener to increase progress and remove image
            img.onclick = () => {
                if (progress < 100) {
                    progress += 5; // Increase progress by 5%
                    progressBar.style.width = `${progress}%`; // Update progress bar
                    progressText.textContent = `${progress}%`; // Update progress percentage in the center

                    // Fade out and remove the image after clicking
                    img.style.opacity = 0;
                    setTimeout(() => trashContainer.removeChild(img), 300);
                }
            };

            trashContainer.appendChild(img);
        }

        // Function to display trash images at intervals
        function displayTrashImages() {
            trashImages.forEach((imagePath, index) => {
                setTimeout(() => {
                    showTrashImage(imagePath);
                }, index * 2000); // 2 seconds between displaying each image
            });
        }

        // Start displaying trash images
        displayTrashImages();

        // Optionally, repeat the display every few seconds
        setInterval(displayTrashImages, 10000); // Every 10 seconds

        // Start updating time every 45 seconds
        updateTime();
    </script>

</body>
</html>

